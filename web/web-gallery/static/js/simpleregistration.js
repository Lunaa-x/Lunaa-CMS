AuthProviders={init:function(){$(document.body).addClassName("js");if($$(".auth-providers").length>0){$$(".auth-providers li a").each(function(A){$(A).observe("click",function(G){Event.stop(G);var D=$(A).next("form");if(D){var C=document.viewport.getWidth()*0.9;var B=document.viewport.getHeight()*0.9;
var F=(screen.width/2)-(C/2);var E=(screen.height/2)-(B/2);login_window=window.open("","rpx_login","menubar=1,resizable=1,scrollbars=yes,width="+C+",height="+B+",left="+F+",top="+E);login_window.focus();$(A).next("form").submit()}})})}}};SimpleRegistration={nameFailures:0,initRegistrationUI:function(B){$(document.body).addClassName("js");
var D=B||"/embed/";if($("name-field-container")){var C=function(E){Event.stop(E);new Ajax.Updater("name-field-container",habboReqPath+"register_submit",{parameters:{checkNameOnly:"true","bean.avatarName":$F("habbo-name"),userName:$F("habbo-name")},onComplete:function(){if($("name-field-container").select(".state-error").length==0){SimpleRegistration.trackNameSuccess();
if($("password")){$("password").focus()}}else{SimpleRegistration.trackNameFailure();$("habbo-name").focus()}new Ajax.Updater("error-messages-container",habboReqPath+"register_messages")}})};Event.observe($("name-field-container"),"click",Event.delegate({"#check-name-btn > *":C,"#check-name-btn":C,"#name-suggestion-list a":function(E){Event.stop(E);
new Ajax.Updater("name-field-container",habboReqPath+"register_submit",{parameters:{checkNameOnly:"true","bean.avatarName":Event.element(E).innerHTML},onComplete:function(){if($("name-field-container").select(".state-error").length==0){SimpleRegistration.trackNameSuccess();if($("password")){$("password").focus()
}}else{SimpleRegistration.trackNameFailure();$("habbo-name").focus()}new Ajax.Updater("error-messages-container",habboReqPath+"register_messages")}})}}));if($("show-login-form")){$("show-login-form").observe("click",function(E){Event.stop(E);$("embedded-login-container").toggle()})}}if($("avatar-field-container")){var A=function(E){return function(F){Event.stop(F);
new Ajax.Updater("selected-avatar",habboReqPath+"register_submit",{parameters:{checkFigureOnly:"true","bean.gender":E,"bean.figure":$(Event.element(F)).up("a").readAttribute("rel")}})}};Event.observe($("avatar-field-container"),"click",Event.delegate({"a.female-avatar img":A("f"),"a.male-avatar img":A("m"),"#more-avatars":function(E){Event.stop(E);
new Ajax.Updater("avatar-field-container",habboReqPath+"register_submit",{parameters:{refreshAvailableFigures:"true"}})}}))}if($("next")){$$("#next,#next-btn").each(function(E){Event.observe($(E),"click",function(F){if(!SimpleRegistration.validatePasswords()){F.stop();return }setTimeout(function(){$("next").disable();
$("next-btn").addClassName("disabled-button");$("register-page").down("form").submit()},50)})})}AuthProviders.init()},validatePasswords:function(){if(!$("password")||!$("password2")){return true}var C=$F("password");var B=$F("password2");if(typeof (C)=="string"&&typeof (B)=="string"){var A=SimpleRegistration.highlightField;
SimpleRegistration.deHighlightField("field-password");SimpleRegistration.deHighlightField("field-password2");if(C.length==0){SimpleRegistration.displayError(L10N.get("register.error.password_required"));A("field-password");return false}if(B.length==0){SimpleRegistration.displayError(L10N.get("register.error.retyped_password_required"));
A("field-password2");return false}if(C!=B){SimpleRegistration.displayError(L10N.get("register.error.retyped_password_notsame"));A("field-password");A("field-password2");return false}if(C.length<6){SimpleRegistration.displayError(L10N.get("register.error.password_length"));A("field-password");A("field-password2");
return false}}return true},displayError:function(A){if($("error-messages-container")){$("error-messages-container").update('<div class="error-messages-holder"><h3>'+L10N.get("embedded_registration.errors.header")+'</h3><ul><li><p class="error-message">'+A+"</p></li></ul></div>")}},highlightField:function(A){$$("."+A).each(function(B){if(!B.hasClassName("state-error")){B.addClassName("state-error")
}})},deHighlightField:function(A){$$("."+A).each(function(B){if(B.hasClassName("state-error")){B.removeClassName("state-error")}})},trackNameSuccess:function(){if(typeof pageTracker!="undefined"){pageTracker._trackEvent("register","name","success")}},trackNameFailure:function(){SimpleRegistration.nameFailures++;
if(typeof pageTracker!="undefined"){pageTracker._trackEvent("register","name","failure"+SimpleRegistration.nameFailures)}}};